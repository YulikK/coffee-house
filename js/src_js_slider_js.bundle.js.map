{"version":3,"file":"js/src_js_slider_js.bundle.js","mappings":";;;;;;;;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iDAAiD,kCAAkC;AACnF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://coffee-house/./src/js/slider.js"],"sourcesContent":["const favoriteSectionElement = document.querySelector(`.favorite`);\n\nif (favoriteSectionElement !== null) {\n  const beforeBtn = document.querySelector('.slider__before');\n  const afterBtn = document.querySelector('.slider__after');\n  const sliderTrack = document.querySelector('.slides');\n  const slideElement = document.querySelectorAll('.slide');\n  const delay = 6000;\n  const barDelay = 10;\n  let isMouseOver = false;\n  let isSwipe = false;\n  let timerEndTime;\n  let counter = 1;\n  let timerStepId;\n  let timerBarId;\n  let currentXPosition = 0;\n  let startXPosition = 0;\n  let currentSlideTransform = 0;\n  let endXPosition = 0;\n  const pixelsForNextStep = 60;\n  const trfRegExp = /([-0-9.]+(?=px))/;\n\n  function setCounter(newCount) {\n    if (newCount < 1) {\n      counter = 3;\n    } else if (newCount > 3) {\n      counter = 1;\n    } else {\n      counter = newCount;\n    }\n    return counter\n  };\n\n  function setSlide(newCounter) {\n    isMouseOver = false;\n    isSwipe = false;\n    resetTimerBar();\n    counter = setCounter(newCounter);\n    document.getElementById('radio' + counter).checked = true;\n    clearTimer();\n    setTimers();\n  }\n\n  function onSlideMouseOver(evt){\n    if (!isMouseOver && evt.currentTarget.classList.contains('slide') && evt.pointerType == 'mouse') {\n      isMouseOver = true;\n      setTimerPause();\n      evt.currentTarget.addEventListener('pointerleave', onSlideMouseOut);\n    }\n  }\n  function onSlideMouseOut(evt){\n    if(evt.currentTarget.classList.contains('slide')) {\n      isMouseOver = false;\n      stopTimerPause();\n\n    }\n  }\n  function onChangeSlide(evt){\n    evt.preventDefault();\n    setSlide(Number(evt.target.id.toString().slice(-1)));\n  };\n\n  function onClickBeforeSlide(evt){\n    evt.preventDefault();\n    setSlide(counter - 1);\n  };\n\n  function onClickAfterSlide(evt){\n    evt.preventDefault();\n    setSlide(counter + 1);\n  };\n\n\n  function setTimerSlide() {\n    setSlide(counter + 1);\n  }\n\n  function setTimerPause() {\n    if(isSwipe || isMouseOver){\n      clearTimer();\n      timerEndTime = timerEndTime - Date.now();\n      timerEndTime = Math.min(Math.abs(timerEndTime), delay);\n    }\n  }\n  function stopTimerPause() {\n    setTimers(timerEndTime);\n  }\n\n  function setTimerBar() {\n    const barElement = document.querySelector('.manual-btn' + counter + ' span');\n    const timeToEnd = timerEndTime - Date.now();\n    const timePass = delay - timeToEnd;\n    barElement.style.width = timePass * 100 / delay + '%';\n  }\n\n  function resetTimerBar() {\n    const barElement = document.querySelector('.manual-btn' + counter + ' span');\n    barElement.style.width = '0px';\n  }\n\n  function clearTimer(){\n    clearInterval(timerStepId);\n    clearInterval(timerBarId);\n  }\n\n  function setTimers(slideDelay = delay){\n    if(!isMouseOver && !isSwipe) {\n      slideDelay = Math.min(Math.abs(slideDelay), delay);\n      timerStepId = setInterval(setTimerSlide, slideDelay);\n      timerBarId = setInterval(setTimerBar, barDelay);\n      timerEndTime = Date.now() + slideDelay;\n    }\n  }\n\n  function swipeStart(evt) {\n    evt.preventDefault();\n    const eventTouch = (evt.type.search('touch') !== -1) ? evt.touches[0] : evt;\n    isSwipe = true;\n\n    setTimerPause();\n\n    currentXPosition = startXPosition = eventTouch.clientX;\n\n    sliderTrack.style.transition = '';\n\n    document.addEventListener('touchmove', swipeAction);\n    document.addEventListener('touchend', swipeEnd);\n  }\n  function swipeAction(evt) {\n    const eventTouch = (evt.type.search('touch') !== -1) ? evt.touches[0] : evt;\n\n    let style = sliderTrack.style.transform;\n    let transform = +style.match(trfRegExp)[0];\n\n    currentSlideTransform = startXPosition - eventTouch.clientX;\n    startXPosition = eventTouch.clientX;\n\n    sliderTrack.style.transform = `translate3d(${transform - currentSlideTransform}px, 0px, 0px)`;\n  }\n  function swipeEnd() {\n\n    endXPosition = currentXPosition - startXPosition;\n    isSwipe = false;\n\n    document.removeEventListener('touchmove', swipeAction);\n    document.removeEventListener('touchend', swipeEnd);\n    \n    if (Math.abs(endXPosition) > pixelsForNextStep) {\n      if (currentXPosition < startXPosition) {\n        setSlide(counter - 1);\n      } else if (currentXPosition > startXPosition) {\n        setSlide(counter + 1);\n      }\n    } else {\n      stopTimerPause();\n    }\n    \n    sliderTrack.style.transform = `translate3d(0px, 0px, 0px)`;\n    sliderTrack.style.transition = `all 2s`;\n  };\n\n  setTimers();\n\n  sliderTrack.style.transform = 'translate3d(0px, 0px, 0px)';\n\n  const inputElements = favoriteSectionElement.querySelectorAll('input[name=\"radio-btn\"]');\n  inputElements.forEach((inputElement) => inputElement.addEventListener(`change`, onChangeSlide));\n  slideElement.forEach((cardElement) => cardElement.addEventListener(`pointerover`, onSlideMouseOver));\n  beforeBtn.addEventListener(`click`, onClickBeforeSlide);\n  afterBtn.addEventListener(`click`, onClickAfterSlide);\n  sliderTrack.addEventListener('touchstart', swipeStart);\n}"],"names":[],"sourceRoot":""}